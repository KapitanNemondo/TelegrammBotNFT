# Getting started

Этот раздел нужен для быстрого ознакомления с библиотекой.

## Создаем парсер

Чтобы создать парсер, вытаскиваем из модуля объект `TransactionParser`. Перед созданием объекта укажи адрес кошелька, у которого будем парсить транзакции.

Чтобы послать запрос на парсинг транзакций, используй метод `parse()` внутри объекта `TransactionParser`.

> Метод `parse()` является генератором! То есть, он использует `yield`, чтобы последовательно выдавать отформатированные транзакции.

```python
from ton_parser import TransactionParser

parser = TransactionParser("<SOME-WALLET-ADDRESS>")

for transaction in parser.parse():
    print(transaction)
```

## Получить все транзакции сразу

Если тебе необходимо получить все транзакции сразу, то используй классы `tuple` или `list`. Они могут принимать на вход генераторы и преобразуют их в кортеж или список соответственно.

```python
print(tuple(parser.parse()))
```

# Документация

Этот раздел предназначен для более глубокого ознакомления с библиотекой: с каким данными она работает, каки параметры можно указывать методам и т.д.

## Транзакции

В ходе парсинга парсер возвращает объекты типа `ton_parser.types.Transaction`. Представляют они собой аналог структур в таких языках, как `C`, `C++` и т.д. Класс `Transaction` содержит следующие поля

```python
class Transaction:
    participant: str # адрес второго участника транзакции
    time: datetime.datetime.time # время осуществления транзакции
    amount: float # количество переданной криптовалюты
    transaction_type: TransactionType # тип транзакции
```

## Тип транзакции

Транзакция может быть двух видов: получение и отправка. Это представление реализовано через `enum`. Класс `ton_parser.types.TransactionType` содержит следующую информацию.

```python
class TransactionType(Enum):
    RECEIVE # получение криптовалюты
    TRANSFER # передача криптовалюты
```

## Парсер

Основной объект, с которым ты будешь работать - парсер. Для этого создан класс `TransactionParser`. Внутри он работает с api от toncenter.com.

```python
class TransactionParser:
    def __init__(address: str) -> None: ...
    """
    Конструктор парсера

    address - адрес кошелька, транзакции которого парсим
    """

    def parse(protected: bool, start: datetime.datetime, end: datetime.datetime) -> Iterable[ton_parser.types.Transaction]: ...
    """
    Парсит транзакции кошелька.

    protected (Необязательно) - режим парсинга. В незащищенном режиме, если api запретит доступ, возвратив код ошибки [429] Too many requests, то парсинг аварийно прекратит свою работу. В защищенном режиме он сам обработает ошибку, пробуя заново отправлять запросы.

    [!] Не рекомендуется использовать незащищенный режим в связке с list, tuple, по скольку при аварийной остановке все данные потеряются.

    [!] При использовании защищенного режима быть осторожным, т. к. в этом режиме парсер забирает поток исполнения.

    start (Необязательно) - начальное время и дата транзакции
    end (Необязательно) - конечное время и дата транзакции
    """
```